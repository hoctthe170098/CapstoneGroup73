<div class="baitap-wrapper">
    <h3>DANH SÁCH BÀI TẬP</h3>
    
    
    <div class="filter-bar">
      <select [(ngModel)]="trangThaiFilter" (change)="applyFilter()">
        <option value="">Trạng thái</option>
        <option value="DangMo">Đang mở</option>
        <option value="DaDong">Đã đóng</option>
      </select>
  
      <input type="date" [(ngModel)]="ngayFilter" (change)="applyFilter()" />
    </div>
    <div class="header-bar">
      <h4>DANH SÁCH BÀI TẬP</h4>
      <button class="add-btn" (click)="openAddModal()">+ Thêm Bài Tập</button>
    </div>
    <div class="list-container">
      <div class="baitap-item" *ngFor="let bt of paginatedBaiTaps">
        <div class="left-icon ft-book-open">
          
        </div>
        <div class="info">
          <h4>{{ bt.ten }}</h4>
          <p>
            <i class="ft-calendar"></i> {{ bt.ngay }} &nbsp;&nbsp; <i class="ft-clock"></i> {{ bt.gio }}
          </p>
        </div>
        <div class="status">
          <span>Trạng thái</span><br />
          <span [ngClass]="bt.trangThai === 'DangMo' ? 'open' : 'closed'">
            {{ bt.trangThai === 'DangMo' ? 'Đang mở' : 'Đã đóng' }}
          </span>
        </div>
      </div>
    </div>
<!-- POPUP THÊM BÀI TẬP -->
<div class="modal-overlay" *ngIf="isAddModalOpen" (click)="closeAddModal()"></div>
<div class="modal-content" *ngIf="isAddModalOpen">
  <div class="modal-header">
    <h3>Thêm bài tập</h3>
    <button class="close-btn" (click)="closeAddModal()"><i class="ft-x"></i></button>
  </div>

  <div class="modal-body">
    <label>Thời gian hết hạn</label>
    <input type="time" [(ngModel)]="newBaiTap.gioHetHan" class="form-control" />

    <label>Tiêu đề</label>
    <input type="text" [(ngModel)]="newBaiTap.tieuDe" class="form-control" placeholder="Tiêu đề..." />

    <label>Nội dung</label>
    <textarea [(ngModel)]="newBaiTap.noiDung" class="form-control" placeholder="Nội dung bài tập..."></textarea>

    <label>File tải lên</label>
    <div *ngFor="let file of newBaiTap.files; let i = index" class="uploaded-file">
      <div class="file-info">
        <strong>{{ file.name }}</strong>
        <span>{{ (file.size / 1024) | number:'1.0-0' }} KB</span>
      </div>
      <button class="remove-btn" (click)="removeFile(i)">
        <i class="ft-trash-2 text-danger"></i>
      </button>
    </div>
  </div>

  <div class="modal-footer">
    <label class="upload-btn">
      <i class="ft-upload-cloud"></i>
      <input type="file" multiple (change)="handleFileInput($event)" hidden />
    </label>
    <div class="footer-actions">
      <button class="cancel-btn" (click)="closeAddModal()">Hủy</button>
      <button class="add-btn" (click)="submitNewBaiTap()">Thêm</button>
    </div>
  </div>
</div>


    <!-- Pagination -->
    <div class="pagination">
      <button (click)="goToPage(currentPage - 1)" [disabled]="currentPage === 1">&lt;</button>
      <button
        *ngFor="let page of [].constructor(totalPages); let i = index"
        [class.active]="currentPage === i + 1"
        (click)="goToPage(i + 1)"
      >
        {{ i + 1 }}
      </button>
      <button (click)="goToPage(currentPage + 1)" [disabled]="currentPage === totalPages">&gt;</button>
    </div>
  </div>
  